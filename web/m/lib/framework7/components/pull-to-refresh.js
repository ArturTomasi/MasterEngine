(function framework7ComponentLoader(t,e){void 0===e&&(e=!0);document,window;var r=t.$,o=(t.Template7,t.utils),n=t.device,a=t.support,s=t.Class,i=(t.Modal,t.ConstructorMethods),l=(t.ModalMethods,function(t){function e(e,o){t.call(this,{},[e]);var s=this,i=r(o),l=i.find(".ptr-preloader");s.$el=i,s.el=i[0],s.app=e,s.bottom=s.$el.hasClass("ptr-bottom"),s.useModulesParams({});var p,c,u,f="md"===e.theme;s.done=function(){return(f?l:i).transitionEnd(function(){i.removeClass("ptr-transitioning ptr-pull-up ptr-pull-down"),i.trigger("ptr:done"),s.emit("local::done ptrDone",i[0])}),i.removeClass("ptr-refreshing").addClass("ptr-transitioning"),s},s.refresh=function(){return i.hasClass("ptr-refreshing")?s:(i.addClass("ptr-transitioning ptr-refreshing"),i.trigger("ptr:refresh",s.done),s.emit("local::refresh ptrRefresh",i[0],s.done),s)};var d,h,v,g,m,b,C,y,M,T,w,P={},E=!1,R=!1,x=!1,D=0,$=!1,H=i.parents(".page");function X(t){if(c){if("android"!==n.os)return;if("targetTouches"in t&&t.targetTouches.length>1)return}i.hasClass("ptr-refreshing")||r(t.target).closest(".sortable-handler").length||(u=!1,y=!1,c=!0,d=void 0,m=void 0,"touchstart"===t.type&&(p=t.targetTouches[0].identifier),P.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,P.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY)}function Y(t){if(c){var e,a,$;if("touchmove"===t.type){if(p&&t.touches)for(var H=0;H<t.touches.length;H+=1)t.touches[H].identifier===p&&($=t.touches[H]);$||($=t.targetTouches[0]),e=$.pageX,a=$.pageY}else e=t.pageX,a=t.pageY;if(e&&a)if(void 0===d&&(d=!!(d||Math.abs(a-P.y)>Math.abs(e-P.x))),d){if(g=i[0].scrollTop,!u){var X,Y;if(i.removeClass("ptr-transitioning"),M=i[0].scrollHeight,T=i[0].offsetHeight,s.bottom&&(w=M-T),t.target!==o&&r(t.target).parents().each(function(t,e){e===o&&(X=!0),X||e.scrollHeight>e.offsetHeight&&(Y=!0)}),Y||g>M)return void(c=!1);C&&(b=i.attr("data-ptr-distance")).indexOf("%")>=0&&(b=M*parseInt(b,10)/100),D=i.hasClass("ptr-refreshing")?b:0,R=!(M!==T&&"ios"===n.os&&!f),x=!1}u=!0,h=a-P.y,void 0===m&&(s.bottom?g!==w:0!==g)&&(m=!0),(s.bottom?h<0&&g>=w||g>w:h>0&&g<=0||g<0)?("ios"===n.os&&parseInt(n.osVersion.split(".")[0],10)>7&&(s.bottom||0!==g||m||(R=!0),s.bottom&&g===w&&!m&&(R=!0)),R||!s.bottom||f||(i.css("-webkit-overflow-scrolling","auto"),i.scrollTop(w),x=!0),(R||x)&&(t.cancelable&&t.preventDefault(),v=(s.bottom?-1*Math.pow(Math.abs(h),.85):Math.pow(h,.85))+D,f?l.transform("translate3d(0,"+v+"px,0)").find(".ptr-arrow").transform("rotate("+(Math.abs(h)/66*180+100)+"deg)"):s.bottom?i.children().transform("translate3d(0,"+v+"px,0)"):i.transform("translate3d(0,"+v+"px,0)")),(R||x)&&Math.pow(Math.abs(h),.85)>b||!R&&Math.abs(h)>=2*b?(E=!0,i.addClass("ptr-pull-up").removeClass("ptr-pull-down")):(E=!1,i.removeClass("ptr-pull-up").addClass("ptr-pull-down")),y||(i.trigger("ptr:pullstart"),s.emit("local::pullStart ptrPullStart",i[0]),y=!0),i.trigger("ptr:pullmove",{event:t,scrollTop:g,translate:v,touchesDiff:h}),s.emit("local::pullMove ptrPullMove",i[0],{event:t,scrollTop:g,translate:v,touchesDiff:h})):(y=!1,i.removeClass("ptr-pull-up ptr-pull-down"),E=!1)}else c=!1}}function _(t){return"touchend"===t.type&&t.changedTouches&&t.changedTouches.length>0&&p&&t.changedTouches[0].identifier!==p?(c=!1,d=!1,u=!1,void(p=null)):c&&u?(v&&(i.addClass("ptr-transitioning"),v=0),f?l.transform("").find(".ptr-arrow").transform(""):s.bottom?i.children().transform(""):i.transform(""),R||!s.bottom||f||i.css("-webkit-overflow-scrolling",""),E?(i.addClass("ptr-refreshing"),i.trigger("ptr:refresh",s.done),s.emit("local::refresh ptrRefresh",i[0],s.done)):i.removeClass("ptr-pull-down"),c=!1,u=!1,void(y&&(i.trigger("ptr:pullend"),s.emit("local::pullEnd ptrPullEnd",i[0])))):(c=!1,void(u=!1))}return(H.find(".navbar").length>0||H.parents(".view").children(".navbar").length>0)&&($=!0),H.hasClass("no-navbar")&&($=!1),$||s.bottom||i.addClass("ptr-no-navbar"),i.attr("data-ptr-distance")?C=!0:b=f?66:44,H.length&&i.length?(i[0].f7PullToRefresh=s,s.attachEvents=function(){var t=!!a.passiveListener&&{passive:!0};i.on(e.touchEvents.start,X,t),e.on("touchmove:active",Y),e.on("touchend:passive",_)},s.detachEvents=function(){var t=!!a.passiveListener&&{passive:!0};i.off(e.touchEvents.start,X,t),e.off("touchmove:active",Y),e.off("touchend:passive",_)},s.useModules(),s.init(),s):s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(){this.attachEvents()},e.prototype.destroy=function(){var t=this;t.emit("local::beforeDestroy ptrBeforeDestroy",t),t.$el.trigger("ptr:beforedestroy",t),delete t.el.f7PullToRefresh,t.detachEvents(),o.deleteProps(t),t=null},e}(s)),p={name:"pullToRefresh",create:function(){var t=this;t.ptr=o.extend(i({defaultSelector:".ptr-content",constructor:l,app:t,domProp:"f7PullToRefresh"}),{done:function(e){var r=t.ptr.get(e);if(r)return r.done()},refresh:function(e){var r=t.ptr.get(e);if(r)return r.refresh()}})},static:{PullToRefresh:l},on:{tabMounted:function(t){var e=this;r(t).find(".ptr-content").each(function(t,r){e.ptr.create(r)})},tabBeforeRemove:function(t){var e=r(t),o=this;e.find(".ptr-content").each(function(t,e){o.ptr.destroy(e)})},pageInit:function(t){var e=this;t.$el.find(".ptr-content").each(function(t,r){e.ptr.create(r)})},pageBeforeRemove:function(t){var e=this;t.$el.find(".ptr-content").each(function(t,r){e.ptr.destroy(r)})}}};if(e){if(t.prototype.modules&&t.prototype.modules[p.name])return;t.use(p),t.instance&&(t.instance.useModuleParams(p,t.instance.params),t.instance.useModule(p))}return p}(Framework7, typeof Framework7AutoInstallComponent === 'undefined' ? undefined : Framework7AutoInstallComponent))
